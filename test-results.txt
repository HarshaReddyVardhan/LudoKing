
> ludo-king-party@0.0.1 test
> vitest --run --reporter=verbose


[7m[1m[36m RUN [39m[22m[27m [36mv1.6.1[39m [90mD:/Project/LudoKing[39m

 [32mΓ£ô[39m src/room/roomUtils.test.ts[2m > [22mRoom Utilities[2m > [22mgenerateRoomCode[2m > [22mshould generate a 6-character code
 [32mΓ£ô[39m src/room/roomUtils.test.ts[2m > [22mRoom Utilities[2m > [22mgenerateRoomCode[2m > [22mshould only contain valid characters
 [32mΓ£ô[39m src/room/roomUtils.test.ts[2m > [22mRoom Utilities[2m > [22mgenerateRoomCode[2m > [22mshould generate unique codes
 [32mΓ£ô[39m src/room/roomUtils.test.ts[2m > [22mRoom Utilities[2m > [22misValidRoomCode[2m > [22mshould return true for valid 6-char codes
 [32mΓ£ô[39m src/room/roomUtils.test.ts[2m > [22mRoom Utilities[2m > [22misValidRoomCode[2m > [22mshould return false for invalid codes
 [32mΓ£ô[39m src/room/roomUtils.test.ts[2m > [22mRoom Utilities[2m > [22mnormalizeRoomCode[2m > [22mshould uppercase and trim
 [32mΓ£ô[39m src/room/roomUtils.test.ts[2m > [22mRoom Utilities[2m > [22mMAX_PLAYERS_PER_ROOM[2m > [22mshould be 4
 [32mΓ£ô[39m src/logic/gameState.test.ts[2m > [22mGameState Logic[2m > [22mshould create a valid initial state
 [32mΓ£ô[39m src/logic/gameState.test.ts[2m > [22mGameState Logic[2m > [22mshould initialize pawns correctly
 [32mΓ£ô[39m src/logic/gameState.test.ts[2m > [22mGameState Logic[2m > [22mshould create a player object
 [32mΓ£ô[39m src/logic/simpleBot.test.ts[2m > [22mSimple Bot[2m > [22msimpleBotDecide[2m > [22mshould return ROLL action in ROLLING phase
 [32mΓ£ô[39m src/logic/simpleBot.test.ts[2m > [22mSimple Bot[2m > [22msimpleBotDecide[2m > [22mshould return MOVE action in MOVING phase with valid moves
 [32mΓ£ô[39m src/logic/simpleBot.test.ts[2m > [22mSimple Bot[2m > [22msimpleBotDecide[2m > [22mshould return SKIP when no valid moves available
 [32mΓ£ô[39m src/logic/simpleBot.test.ts[2m > [22mSimple Bot[2m > [22msimpleBotDecide[2m > [22mshould return SKIP in WAITING or FINISHED phase
 [32mΓ£ô[39m src/logic/simpleBot.test.ts[2m > [22mSimple Bot[2m > [22msimpleBotDecideWeighted[2m > [22mshould prefer goal moves over random
 [32mΓ£ô[39m src/logic/smartBot.test.ts[2m > [22msmartBotDecide[2m > [22mshould roll dice if in ROLLING phase
 [32mΓ£ô[39m src/logic/smartBot.test.ts[2m > [22msmartBotDecide[2m > [22mshould prefer capturing an opponent
 [32mΓ£ô[39m src/logic/smartBot.test.ts[2m > [22msmartBotDecide[2m > [22mshould prefer entering safe square
 [32mΓ£ô[39m src/logic/smartBot.test.ts[2m > [22msmartBotDecide[2m > [22mshould prefer leaving base
 [32mΓ£ô[39m src/shared/renderPath.test.ts[2m > [22mrenderPath[2m > [22mgetBoardPosition[2m > [22mshould return coordinates for index 1
 [32mΓ£ô[39m src/shared/renderPath.test.ts[2m > [22mrenderPath[2m > [22mgetBoardPosition[2m > [22mshould return coordinates for index 52
 [32mΓ£ô[39m src/shared/renderPath.test.ts[2m > [22mrenderPath[2m > [22mgetHomePosition[2m > [22mshould return different positions for different colors
 [32mΓ£ô[39m src/shared/renderPath.test.ts[2m > [22mrenderPath[2m > [22mgetPawn3DPosition[2m > [22mshould return base positions for HOME
 [32mΓ£ô[39m src/shared/renderPath.test.ts[2m > [22mrenderPath[2m > [22mgetPawn3DPosition[2m > [22mshould return goal position for GOAL
 [32mΓ£ô[39m src/shared/renderPath.test.ts[2m > [22mrenderPath[2m > [22mgetPawn3DPosition[2m > [22mshould return home stretch position
 [31m├ù[39m src/shared/renderPath.test.ts[2m > [22mrenderPath[2m > [22mgetPawn3DPosition[2m > [22mshould return main track position using board logic
[31m   ΓåÆ Cannot find module './board'
Require stack:
- D:\Project\LudoKing\src\shared\renderPath.ts[39m
 [32mΓ£ô[39m src/logic/diceEngine.test.ts[2m > [22mDice Engine[2m > [22mrollDice[2m > [22mshould return a value between 1 and 6
 [32mΓ£ô[39m src/logic/diceEngine.test.ts[2m > [22mDice Engine[2m > [22mhandleRollRequest (Anti-Cheat)[2m > [22mshould allow the current player to roll
 [32mΓ£ô[39m src/logic/diceEngine.test.ts[2m > [22mDice Engine[2m > [22mhandleRollRequest (Anti-Cheat)[2m > [22mshould reject roll from wrong player (not their turn)
 [32mΓ£ô[39m src/logic/diceEngine.test.ts[2m > [22mDice Engine[2m > [22mhandleRollRequest (Anti-Cheat)[2m > [22mshould reject roll if player already rolled (MOVING phase)
 [31m├ù[39m src/logic/diceEngine.test.ts[2m > [22mDice Engine[2m > [22mhandleRollRequest (Anti-Cheat)[2m > [22mshould prevent double rolls in succession
[31m   ΓåÆ expected 'Rolling too fast' to contain 'Cannot roll in MOVING phase'[39m
 [32mΓ£ô[39m src/logic/diceEngine.test.ts[2m > [22mDice Engine[2m > [22mhandleRollRequest (Anti-Cheat)[2m > [22mshould reject roll from unknown player
 [32mΓ£ô[39m src/logic/diceEngine.test.ts[2m > [22mDice Engine[2m > [22mresetToRollingPhase[2m > [22mshould reset state for next player turn
 [32mΓ£ô[39m src/logic/moveValidation.test.ts[2m > [22mMovement Validation[2m > [22mPawn in Home (Base)[2m > [22mshould NOT allow pawn in home to move with dice 1-5
 [32mΓ£ô[39m src/logic/moveValidation.test.ts[2m > [22mMovement Validation[2m > [22mPawn in Home (Base)[2m > [22mshould allow pawn in home to move with dice 6
 [32mΓ£ô[39m src/logic/moveValidation.test.ts[2m > [22mMovement Validation[2m > [22mPawn on Main Track[2m > [22mshould calculate correct destination for normal move
 [32mΓ£ô[39m src/logic/moveValidation.test.ts[2m > [22mMovement Validation[2m > [22mPawn on Main Track[2m > [22mshould wrap around the board correctly
 [31m├ù[39m src/logic/moveValidation.test.ts[2m > [22mMovement Validation[2m > [22mPawn on Main Track[2m > [22mshould not allow move if blocked by own pawn
[31m   ΓåÆ expected { pawnId: 'RED_0', from: 10, ΓÇª(3) } to be undefined[39m
 [32mΓ£ô[39m src/logic/moveValidation.test.ts[2m > [22mMovement Validation[2m > [22mPawn on Main Track[2m > [22mshould identify multiple pawns as valid when they can all move
 [31m├ù[39m src/logic/moveValidation.test.ts[2m > [22mMovement Validation[2m > [22mCapture Detection[2m > [22mshould calculate global positions correctly for collision detection
[31m   ΓåÆ expected 27 to be 14 // Object.is equality[39m
 [32mΓ£ô[39m src/logic/moveValidation.test.ts[2m > [22mMovement Validation[2m > [22mCapture Detection[2m > [22mshould detect capture on non-safe square
 [32mΓ£ô[39m src/logic/moveValidation.test.ts[2m > [22mMovement Validation[2m > [22mCapture Detection[2m > [22mshould correctly detect collision for capture
 [32mΓ£ô[39m src/logic/moveValidation.test.ts[2m > [22mMovement Validation[2m > [22mHome Stretch and Goal[2m > [22mshould allow exact roll to reach goal
 [32mΓ£ô[39m src/logic/moveValidation.test.ts[2m > [22mMovement Validation[2m > [22mHome Stretch and Goal[2m > [22mshould NOT allow overshooting the goal
 [32mΓ£ô[39m src/logic/moveValidation.test.ts[2m > [22mMovement Validation[2m > [22mexecuteMove[2m > [22mshould reject move for invalid pawn
 [32mΓ£ô[39m src/logic/moveValidation.test.ts[2m > [22mMovement Validation[2m > [22mexecuteMove[2m > [22mshould successfully execute valid move
 [32mΓ£ô[39m src/logic/moveValidation.test.ts[2m > [22mMovement Validation[2m > [22mexecuteMove[2m > [22mshould grant extra turn on rolling 6
 [32mΓ£ô[39m src/logic/moveValidation.test.ts[2m > [22mMovement Validation[2m > [22mexecuteMove[2m > [22mshould switch turn after normal move
 [32mΓ£ô[39m src/logic/moveValidation.test.ts[2m > [22mMovement Validation[2m > [22mgetValidPawnIds[2m > [22mshould return only IDs of movable pawns

npm : 
[31mΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»[1m[7m 
Failed Tests 4 
[27m[22mΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»[39m
At line:1 char:1
+ npm test -- --run --reporter=verbose 
2>&1 | Out-File -FilePath test-r ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~
    + CategoryInfo          : NotSpecif 
   ied: ([31mΓÄ»ΓÄ»ΓÄ»Γ...»ΓÄ»ΓÄ»ΓÄ»  
  [39m:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCom 
   mandError
 

[31m[1m[7m FAIL [27m[22m[39m 
src/logic/diceEngine.test.ts[2m > 
[22mDice Engine[2m > 
[22mhandleRollRequest (Anti-Cheat)[2m 
> [22mshould prevent double rolls in 
succession
[31m[1mAssertionError[22m: expected 
'Rolling too fast' to contain 'Cannot 
roll in MOVING phase'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- Cannot roll in MOVING phase[39m
[31m+ Rolling too fast[39m

[36m [2mΓ¥»[22m src/logic/diceEngine.
test.ts:[2m68:38[22m[39m
    [90m 66| [39m            
[35mconst[39m secondRoll [33m=[39m 
[34mhandleRollRequest[39m(firstRoll[33
m.[39mnewState[33m,[39m 
[32m'[39mΓÇª
    [90m 67| [39m            [34mexpe
ct[39m(secondRoll[33m.[39msuccess)[3
3m.[39m[34mtoBe[39m([35mfalse[39m)
[33m;[39m
    [90m 68| [39m            [34mexpe
ct[39m(secondRoll[33m.[39merror)[33m
.[39m[34mtoContain[39m([32m'Cannot 
roll in MOVING [39mΓÇª
    [90m   | [39m                     
                [31m^[39m
    [90m 69| [39m        })[33m;[39m
    [90m 70| [39m

[31m[2mΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»Γ
Ä»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ
»[1/4]ΓÄ»[22m[39m

[31m[1m[7m FAIL [27m[22m[39m 
src/logic/moveValidation.test.ts[2m > 
[22mMovement Validation[2m > 
[22mPawn on Main Track[2m > 
[22mshould not allow move if blocked 
by own pawn
[31m[1mAssertionError[22m: expected 
{ pawnId: 'RED_0', from: 10, ΓÇª(3) } 
to be undefined[39m
[36m [2mΓ¥»[22m src/logic/moveValidat
ion.test.ts:[2m85:30[22m[39m
    [90m 83| [39m
    [90m 84| [39m            
[35mconst[39m pawnMove [33m=[39m 
validMoves[33m.[39m[34mfind[39m(m 
[33m=>[39m m[33m.[39mpawnId 
[33m===[39m [32m'RED_0'[39mΓÇª
    [90m 85| [39m            [34mexpe
ct[39m(pawnMove)[33m.[39m[34mtoBeUnd
efined[39m()[33m;[39m
    [90m   | [39m                     
        [31m^[39m
    [90m 86| [39m        })[33m;[39m
    [90m 87| [39m

[31m[2mΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»Γ
Ä»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ
»[2/4]ΓÄ»[22m[39m

[31m[1m[7m FAIL [27m[22m[39m 
src/logic/moveValidation.test.ts[2m > 
[22mMovement Validation[2m > 
[22mCapture Detection[2m > 
[22mshould calculate global positions 
correctly for collision detection
[31m[1mAssertionError[22m: expected 
27 to be 14 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 14[39m
[31m+ 27[39m

[36m [2mΓ¥»[22m src/logic/moveValidat
ion.test.ts:[2m126:32[22m[39m
    [90m124| [39m            [90m// 
Since input is Global, it should map to 
14.[39m
    [90m125| [39m            
[35mconst[39m blueGlobal [33m=[39m 
[34mtoGlobalPosition[39m([34m14[39m[
33m,[39m [32m'BLUE'[39m)[33m;[39m
    [90m126| [39m            [34mexpe
ct[39m(blueGlobal)[33m.[39m[34mtoBe
[39m([34m14[39m)[33m;[39m
    [90m   | [39m                     
          [31m^[39m
    [90m127| [39m        })[33m;[39m
    [90m128| [39m

[31m[2mΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»Γ
Ä»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ
»[3/4]ΓÄ»[22m[39m

[31m[1m[7m FAIL [27m[22m[39m 
src/shared/renderPath.test.ts[2m > 
[22mrenderPath[2m > 
[22mgetPawn3DPosition[2m > 
[22mshould return main track position 
using board logic
[31m[1mError[22m: Cannot find module 
'./board'
Require stack:
- D:\Project\LudoKing\src\shared\renderP
ath.ts[39m
[36m [2mΓ¥»[22m 
Module.getPawn3DPosition src/shared/rend
erPath.ts:[2m187:34[22m[39m
    [90m185| [39m    [90m// `board` 
doesn't import `renderPath`.[39m
    [90m186| [39m
    [90m187| [39m    [35mconst[39m 
{ toGlobalPosition } [33m=[39m [34mre
quire[39m([32m'./board'[39m)[33m;[3
9m [90m// Dynamic import[39mΓÇª
    [90m   | [39m                     
            [31m^[39m
    [90m188| [39m    [90m// Or just 
import at top. Circular dependency 
`board` <-> `renderP[39mΓÇª
    [90m189| [39m    [90m// checked 
board.ts, it only imports types. So 
safe to import boar[39mΓÇª
[90m [2mΓ¥»[22m src/shared/renderPath
.test.ts:[2m52:27[22m[39m

[31m[2mΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»Γ
Ä»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ
»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»[22m[39m
[31m[1mSerialized Error:[22m[39m 
[90m{ code: 'MODULE_NOT_FOUND', 
requireStack: [ 'D:\Project\LudoKing\src
\shared\renderPath.ts' ] }[39m
[31m[2mΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»Γ
Ä»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ»ΓÄ
»[4/4]ΓÄ»[22m[39m

[2m Test Files [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m4 passed[39m[22m[90m (7)[39m
[2m      Tests [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m45 passed[39m[22m[90m (49)[39m
[2m   Start at [22m 00:04:34
[2m   Duration [22m 807ms[2m (transform 645ms, setup 0ms, collect 1.11s, tests 109ms, environment 2ms, prepare 1.82s)[22m

